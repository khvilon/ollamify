# Chat

[English](chat.md) | **Русский**

Путь в UI: `/chat`

## Назначение

Чат с документами через RAG:

- выбираются релевантные чанки из выбранного проекта
- опционально применяется реранкер
- генерируется ответ выбранной моделью

## Управление (верхняя панель)

- **Project**: какой индекс документов использовать
- **Model**:
  - локальные Ollama модели (установленные)
  - модели OpenRouter (с префиксом `openrouter/...`)
  - embedding‑модели скрываются из списка
- **Использовать Reranker**: включить/выключить реранкинг
- **Гибридный поиск**: объединяет векторный и keyword поиск
- **Показывать размышления**: показывает “thinking” секцию (если есть)

## Как задавать вопросы

1) Выберите project и model  
2) Введите сообщение и нажмите **Send**

UI вызывает:
- `POST /api/ai/rag`

## Источники

Ответ ассистента может содержать:

- **Размышления** (сворачиваемо)
- **Источники** (сворачиваемо): файл, similarity, фрагмент, метаданные

## Push-to-talk (STT)

В поле ввода есть кнопка микрофона:

- Зажмите для записи → отпустите для отправки
- UI отправляет аудио на:
  - `POST /api/stt/transcribe` (по умолчанию `ru`)
- Распознанный текст отправляется как обычное сообщение

## Примечания / ограничения

- Нужен хотя бы один проект и хотя бы одна не‑embedding модель.
- Если STT/TTS сервисы не запущены, голосовые функции работать не будут.

