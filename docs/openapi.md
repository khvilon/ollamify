# OpenAPI / Swagger

**Language:** **English** | [Русский](openapi.ru.md)

If you want a pre-install, human-friendly guide, start here:
- [`docs/api/README.md`](api/README.md)

## Where to find the docs

- **External Swagger UI** (recommended): `http://localhost/api/docs`
- **External OpenAPI JSON**: `http://localhost/api/docs/swagger.json`

## Static snapshot (in this repository)

- OpenAPI JSON: `docs/api/swagger/swagger.json`
- Swagger UI (offline): `docs/api/static-swagger.md`

The external OpenAPI is generated by `zeus` (Swagger JSDoc) and is intended for:
- external integrations (API keys)
- automation / scripts
- OpenAI-compatible chat usage

## Base URL and routing

All public endpoints are available behind the gateway prefix:

- **Base**: `/api`
- Example: `/api/projects`, `/api/documents`, `/api/ai/rag`

TTS and STT are separate services but exposed via the same gateway:

- `/api/tts/*` → `services/tts`
- `/api/stt/*` → `services/stt`

## Authentication

Send an `Authorization` header for protected endpoints:

```
Authorization: Bearer <JWT or API_KEY>
```

There are two common flows:

### UI / JWT flow

1) Login:
- `POST /auth/login`
- body: `{ "email": "...", "password": "..." }`
- response: `{ "token": "..." }`

2) Use the token:
- `Authorization: Bearer <token>`

### External / API key flow

API keys are managed via the web UI (Users → API keys).

Then use:
- `Authorization: Bearer <api_key>`

## OpenAI-compatible endpoint

The gateway exposes:

- `POST /api/v1/chat/completions`

This is compatible with OpenAI Chat Completions API (see Swagger for exact schema).

