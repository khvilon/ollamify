# TTS Service для Ollamify

Сервис Text-to-Speech на базе **Coqui XTTS v2** для коммерческого использования.

## ✅ Коммерческая лицензия

- **Apache 2.0** - полностью разрешает коммерческое использование
- **Никаких ограничений** на продажу продуктов с этой технологией
- **Открытый исходный код** с полной свободой модификации

## Возможности

- **Высокое качество**: Coqui XTTS v2 - лучшая открытая многоязычная TTS модель
- **Клонирование голоса**: Создание уникальных голосов из коротких образцов
- **Многоязычность**: Поддержка 16+ языков включая русский
- **GPU ускорение**: Оптимизирован для RTX 4060 и аналогичных карт
- **Эмоциональная речь**: Передача интонаций и эмоций

## API Endpoints

### `GET /health`
Проверка состояния сервиса и модели

### `GET /voices` 
Получение списка доступных голосов

### `POST /synthesize`
Синтез речи из текста с возвратом base64

```json
{
  "text": "Привет! Как дела?",
  "voice": "female_1",
  "speed": 1.0,
  "sample_rate": 24000,
  "format": "wav",
  "language": "ru"
}
```

### `POST /synthesize/stream`
Синтез речи с возвратом аудио потока

## Доступные голоса

- **female_1** - Женский голос высокого качества
- **female_2** - Женский эмоциональный голос  
- **male_1** - Четкий мужской голос
- **male_2** - Низкий мужской голос

## Параметры

- **Скорость**: 0.5 - 2.0 (1.0 = нормальная)
- **Частота**: 22050, 24000 Hz  
- **Максимальный текст**: 1000 символов
- **Формат**: WAV
- **Языки**: ru, en, es, fr, de, it, pt, pl, tr, nl, cs, ar, zh, ja, hu, ko

## Использование ресурсов

- **VRAM**: ~2-3GB (XTTS v2 модель)
- **CPU**: Минимальная нагрузка при GPU использовании
- **Скорость**: 2-4x real-time на RTX 4060
- **Качество**: Близко к человеческой речи

## Клонирование голоса

XTTS v2 может клонировать любой голос из 3-15 секундного образца:

```python
# Добавление нового голоса (через API в будущем)
model.tts_to_file(
    text="Ваш текст",
    speaker_wav="path/to/voice_sample.wav",  # 3-15 сек образец
    language="ru",
    file_path="output.wav"
)
```

## Интеграция с Ollamify

TTS сервис автоматически интегрируется через Zeus API:

- `GET /api/tts/voices` - Список голосов
- `POST /api/tts/synthesize` - Синтез речи
- `POST /api/tts/synthesize/stream` - Потоковый синтез
- `GET /api/tts/health` - Состояние сервиса

## Запуск

```bash
# Автоматически с основной системой
./start.sh

# Или отдельно
docker-compose -f docker-compose.tts.yml up -d
```

## Мониторинг

- Логи: `docker logs tts`
- Метрики: `curl http://localhost:8003/health`
- Документация: `http://localhost:8003/docs`

## Коммерческое применение

✅ **Полностью разрешено:**
- Продажа продуктов с TTS
- Коммерческие API сервисы
- Встраивание в платные приложения
- Модификация и распространение

❌ **Нет ограничений** на коммерческое использование 